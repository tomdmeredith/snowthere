# Nixpacks configuration for Railway deployment
# Ensures Python 3.11+ and correct dependency installation
# Uses virtual environment to avoid PEP 668 externally-managed-environment error

[phases.setup]
nixPkgs = ["python311", "python311Packages.pip"]

[phases.install]
cmds = [
  "python -m venv /opt/venv",
  "/opt/venv/bin/pip install --upgrade pip",
  "/opt/venv/bin/pip install -r requirements.txt"
]

[phases.build]
# No build step needed for Python

[start]
cmd = "/opt/venv/bin/python cron.py --run-discovery --use-mixed-selection"
